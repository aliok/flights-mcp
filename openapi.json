{"openapi":"3.1.0","info":{"title":"Flights API","description":"REST API for searching flights using Google Flights data.\n\nThis API allows you to:\n- Search for flights between airports (one-way or round-trip)\n- Find airports by name or city\n- Filter flights by seat class, number of stops, and passenger counts\n\n**Key Features:**\n- Single-leg searches only (A→B for one-way, A→B→A for round-trip)\n- Real-time flight data from Google Flights\n- Support for multiple passenger types (adults, children, infants)\n- Multiple seat classes (economy, premium-economy, business, first)\n\n**Usage Tips:**\n- Use airport search endpoint to find valid IATA codes before searching flights\n- Dates should be in YYYY-MM-DD format\n- Round-trip searches require both outbound and return dates\n- Passenger counts are validated (max 9 total, infants on lap ≤ adults)\n","version":"1.0.0"},"paths":{"/api/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"Check if the service is running.","operationId":"health_check","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/api/airports/search":{"get":{"tags":["Airports"],"summary":"Search Airports Endpoint","description":"Search for airports by name or city.\n\nUse this endpoint to find valid IATA airport codes before searching for flights.\nReturns a list of matching airports (up to 10) with their 3-letter IATA codes and full names.\n\n**Example Usage:**\n- Search \"taipei\" → Returns TPE (Taiwan Taoyuan) and TSA (Taipei Songshan)\n- Search \"los angeles\" → Returns LAX (Los Angeles International)\n- Search \"kennedy\" → Returns JFK (New York John F. Kennedy)\n\n**Tips:**\n- Use the returned IATA codes in flight search requests\n- Search is case-insensitive\n- Partial matches work (e.g., \"angeles\" finds Los Angeles)","operationId":"search_airports","parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":1,"description":"Search query for airport name or city. Can search by city name (e.g., 'taipei', 'los angeles'), airport name (e.g., 'kennedy', 'heathrow'), or partial matches. Returns up to 10 matching airports with their IATA codes.","examples":["taipei","los angeles","tokyo","kayseri","kennedy"],"title":"Q"},"description":"Search query for airport name or city. Can search by city name (e.g., 'taipei', 'los angeles'), airport name (e.g., 'kennedy', 'heathrow'), or partial matches. Returns up to 10 matching airports with their IATA codes."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AirportSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/flights/search":{"post":{"tags":["Flights"],"summary":"Search Flights","description":"Search for flights between airports based on the provided criteria.\n\n**Supported Trip Types:**\n- **One-way**: Single flight leg from departure to arrival airport (A→B)\n- **Round-trip**: Outbound flight (A→B) and return flight (B→A) on specified dates\n\n**Important Constraints:**\n- Single-leg searches only (no multi-city trips)\n- For round-trip, return_date is required and must reverse the route\n- Airport codes must be valid 3-letter IATA codes (use airport search endpoint to find them)\n- Dates must be in YYYY-MM-DD format\n- Total passengers cannot exceed 9\n- Infants on lap cannot exceed number of adults\n\n**Response:**\nReturns a list of available flights with details including:\n- Airline name, departure/arrival times, duration, stops, and price\n- Price indicator (low/typical/high) compared to historical averages\n- Best flight options marked with is_best flag\n\n**Example Workflow:**\n1. Search for airports: GET /api/airports/search?q=taipei\n2. Use airport codes in flight search: POST /api/flights/search with from_airport=\"TPE\", to_airport=\"LAX\"\n\n**Note:** Airline filtering (airlines parameter) is not currently supported and will be ignored.","operationId":"search_flights","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlightSearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlightSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AirportResponse":{"properties":{"code":{"type":"string","title":"Code","description":"Airport IATA code (3-letter code, e.g., 'JFK', 'LAX', 'TPE'). Use this code in flight search requests.","examples":["JFK","LAX","TPE","NRT"]},"name":{"type":"string","title":"Name","description":"Full airport name in uppercase with underscores (e.g., 'NEW_YORK_JOHN_F_KENNEDY_INTERNATIONAL_AIRPORT', 'TAIWAN_TAOYUAN_INTERNATIONAL_AIRPORT'). Replace underscores with spaces for display.","examples":["NEW_YORK_JOHN_F_KENNEDY_INTERNATIONAL_AIRPORT","TAIWAN_TAOYUAN_INTERNATIONAL_AIRPORT"]}},"type":"object","required":["code","name"],"title":"AirportResponse","description":"Airport information with IATA code and full name."},"AirportSearchResponse":{"properties":{"airports":{"items":{"$ref":"#/components/schemas/AirportResponse"},"type":"array","title":"Airports","description":"List of airports matching the search query, limited to top 10 results. Empty list if no airports are found. Use these airport codes in flight search requests.","examples":[[],[{"code":"TPE","name":"TAIWAN_TAOYUAN_INTERNATIONAL_AIRPORT"},{"code":"TSA","name":"TAIPEI_SONGSHAN_AIRPORT"}]]}},"type":"object","required":["airports"],"title":"AirportSearchResponse","description":"Response containing list of airports matching the search query."},"FlightResponse":{"properties":{"is_best":{"type":"boolean","title":"Is Best","description":"Whether this flight is marked as one of the best options (typically based on price, duration, or other factors). Multiple flights can be marked as 'best'.","examples":[true,false]},"name":{"type":"string","title":"Name","description":"Name of the airline operating the flight (e.g., 'Delta', 'American', 'United', 'ZIPAIR Tokyo').","examples":["Delta","American","United","ZIPAIR Tokyo"]},"departure":{"type":"string","title":"Departure","description":"Departure time and date in human-readable format (e.g., '6:00 PM on Thu, Oct 1' or '10:40 AM on Fri, Feb 6').","examples":["6:00 PM on Thu, Oct 1","10:40 AM on Fri, Feb 6"]},"arrival":{"type":"string","title":"Arrival","description":"Arrival time and date in human-readable format (e.g., '9:10 PM on Thu, Oct 1' or '3:00 PM on Sat, Feb 7'). May include next-day indicator if arrival is on a different day.","examples":["9:10 PM on Thu, Oct 1","3:00 PM on Sat, Feb 7"]},"arrival_time_ahead":{"type":"string","title":"Arrival Time Ahead","description":"Indicates if arrival is on a different day. Empty string '' for same-day arrival, '+1' for next day, '+2' for day after next, etc.","examples":["","+1","+2"]},"duration":{"type":"string","title":"Duration","description":"Total flight duration in human-readable format (e.g., '6 hr 10 min', '11 hr 15 min', '12 hr 59 min').","examples":["6 hr 10 min","11 hr 15 min","12 hr 59 min"]},"stops":{"type":"integer","minimum":0.0,"title":"Stops","description":"Number of stops/connections on this flight route. 0 means direct flight (no stops), 1 means one stop, 2 means two stops, etc.","examples":[0,1,2]},"delay":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delay","description":"Delay information if the flight has any known delays or issues. null if no delay information is available.","examples":[null,"Delayed by 30 minutes"]},"price":{"type":"string","title":"Price","description":"Flight price in the local currency format (e.g., 'TRY 6531', '$542', '€450'). Includes currency symbol and amount.","examples":["TRY 6531","$542","€450"]}},"type":"object","required":["is_best","name","departure","arrival","arrival_time_ahead","duration","stops","price"],"title":"FlightResponse","description":"Individual flight search result with details about a specific flight option."},"FlightSearchRequest":{"properties":{"from_airport":{"type":"string","maxLength":3,"minLength":3,"title":"From Airport","description":"Departure airport IATA code (3-letter code, e.g., 'JFK', 'LAX', 'SFO'). Use the airport search endpoint to find valid codes.","examples":["JFK","LAX","SFO","TPE"]},"to_airport":{"type":"string","maxLength":3,"minLength":3,"title":"To Airport","description":"Arrival airport IATA code (3-letter code, e.g., 'JFK', 'LAX', 'SFO'). Use the airport search endpoint to find valid codes.","examples":["LAX","JFK","NRT","CDG"]},"date":{"type":"string","pattern":"^\\d{4}-\\d{2}-\\d{2}$","title":"Date","description":"Outbound departure date in YYYY-MM-DD format. This is the date you want to fly from the departure airport. Example: '2026-02-06' for February 6, 2026.","examples":["2026-02-06","2026-03-15"]},"return_date":{"anyOf":[{"type":"string","pattern":"^\\d{4}-\\d{2}-\\d{2}$"},{"type":"null"}],"title":"Return Date","description":"Return departure date in YYYY-MM-DD format. Required when trip='round-trip', must be null or omitted when trip='one-way'. This is the date you want to fly back from the destination airport. Example: '2026-02-13' for February 13, 2026.","examples":["2026-02-13","2026-03-20"]},"trip":{"type":"string","enum":["one-way","round-trip"],"title":"Trip","description":"Trip type: 'one-way' for a single flight leg (A→B), or 'round-trip' for outbound and return flights (A→B→A). For round-trip, return_date is required.","examples":["one-way","round-trip"]},"airlines":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Airlines","description":"⚠️ NOT CURRENTLY SUPPORTED: List of airline codes (2-letter IATA like 'DL', 'AA', 'UA') or alliances ('SKYTEAM', 'STAR_ALLIANCE', 'ONEWORLD'). This parameter is accepted but ignored by the underlying library. Filtering by airlines is not available at this time.","examples":[["DL","AA"],["STAR_ALLIANCE"],["SKYTEAM","ONEWORLD"]]},"max_stops":{"anyOf":[{"type":"integer","maximum":3.0,"minimum":0.0},{"type":"null"}],"title":"Max Stops","description":"Maximum number of stops allowed for the flight. Use 0 for direct flights only, 1 for flights with at most one stop, etc. Applies to both outbound and return legs. If not specified, flights with any number of stops will be returned.","examples":[0,1,2]},"seat":{"type":"string","enum":["economy","premium-economy","business","first"],"title":"Seat","description":"Seat class for the flight. Options: 'economy' (cheapest, standard seating), 'premium-economy' (more legroom and amenities), 'business' (premium service), 'first' (highest class). Default is 'economy'.","default":"economy","examples":["economy","premium-economy","business","first"]},"passengers":{"$ref":"#/components/schemas/PassengersRequest","description":"Passenger counts including adults, children, and infants. Defaults to 1 adult if not specified. Total passengers cannot exceed 9."},"fetch_mode":{"type":"string","enum":["common","local"],"title":"Fetch Mode","description":"Data fetching mode. Use 'common' (default) for standard web scraping (fast, lightweight). Use 'local' only if 'common' fails (requires Playwright browser setup). Most users should use 'common'.","default":"common","examples":["common","local"]}},"type":"object","required":["from_airport","to_airport","date","trip"],"title":"FlightSearchRequest","description":"Request body for searching flights. Supports single-leg searches only: one-way (A→B) or round-trip (A→B→A)."},"FlightSearchResponse":{"properties":{"current_price":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current Price","description":"Price indicator showing whether current prices are 'low', 'typical', or 'high' compared to historical averages. null if price indicator is not available.","examples":["low","typical","high",null]},"flights":{"items":{"$ref":"#/components/schemas/FlightResponse"},"type":"array","title":"Flights","description":"List of available flights matching the search criteria, sorted by relevance (best options typically appear first). Empty list if no flights are found.","examples":[[],[{"arrival":"9:10 PM on Thu, Oct 1","arrival_time_ahead":"","departure":"6:00 PM on Thu, Oct 1","duration":"6 hr 10 min","is_best":true,"name":"Delta","price":"TRY 6531","stops":0}]]}},"type":"object","required":["current_price","flights"],"title":"FlightSearchResponse","description":"Response containing flight search results with price indicator and list of available flights."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Service status"}},"type":"object","required":["status"],"title":"HealthResponse","description":"Health check response."},"PassengersRequest":{"properties":{"adults":{"type":"integer","maximum":9.0,"minimum":1.0,"title":"Adults","description":"Number of adult passengers (age 12+). Required: at least 1 adult. Maximum: 9 adults.","default":1,"examples":[1,2]},"children":{"type":"integer","maximum":8.0,"minimum":0.0,"title":"Children","description":"Number of child passengers (age 2-11). Maximum: 8 children.","default":0,"examples":[0,1,2]},"infants_in_seat":{"type":"integer","maximum":8.0,"minimum":0.0,"title":"Infants In Seat","description":"Number of infants (under 2) traveling in their own seat. Maximum: 8 infants.","default":0,"examples":[0,1]},"infants_on_lap":{"type":"integer","maximum":8.0,"minimum":0.0,"title":"Infants On Lap","description":"Number of infants (under 2) traveling on an adult's lap. Cannot exceed number of adults. Maximum: 8 infants.","default":0,"examples":[0,1]}},"type":"object","title":"PassengersRequest","description":"Passenger counts for flight search. Total passengers cannot exceed 9."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}